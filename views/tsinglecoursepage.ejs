<!doctype html>
<html lang="en">
<title>MSEP</title>

<link href="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css" rel="stylesheet">
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<link rel="stylesheet" href="http://cdn.datatables.net/1.10.2/css/jquery.dataTables.min.css">
<script type="text/javascript" src="http://cdn.datatables.net/1.10.2/js/jquery.dataTables.min.js"></script>
<script type="text/javascript" src="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>

<body>
    <div>
        <h1>Course Page</h1>
    </div>
    <hr>
    <div>
        <h2>Course </h2>
        <% if(course!=null) { %>
            <div> This is a single course page
                <h1> Course : <%=course.name%>
                </h1>
                <h2>Course Code : <%=course.code%>
                </h2>
                <h2>Cap for course is: <%=course.cap%>
                </h2>
                <!-- <h2>Offline Seats Available: <%=course.offlineSeats%> </h2> -->
                <form method="get" action="/updateseat">
                    <label>Available Offline Seats for</label>
                    <input name="course" type="text" value="<%=course.code%>" placeholder="<%=course.code%>">
                    <input name="offlineSeats" type="number" value="<%=course.offlineSeats%>"
                        placeholder="<%=course.cap%>">
                    <!-- <button class="btn btn-success" type="submit">Enter Value</button> -->
                    <!-- <button type="reset">Reset</button> -->
                    <input type="submit" value="submit" />
                </form>
                <h2>Meetlink: <%=course.meetlink%>
                </h2>
                <% } %>
            </div>
    </div>
    <!-- <div> -->
    <!-- Number of students for Next offline class : <%=course.bookedSeats%> -->
    <!-- </div> -->
    <div style="margin-left: 50px; margin-right: 350px; margin-top: 60px;">
        <h2>Students attending offline classes are :</h2>
        <% if(course.offlineStud!=null) { %>
            <!-- <%=course.offlineStud.length%> -->
            <table id="offlinestudents" class="table table-striped table-bordered">
                <thead>
                    <tr>
                        <th>Name</th>
                        <th>Email-ID</th>
                        <th>Remove From Offline</th>

                    </tr>
                </thead>
                <tbody>
                    <% course.offlineStud.forEach(function(item){ %>
                        <tr>
                            <td>
                                <%= item.name%>
                            </td>
                            <td>
                                <%= item.email%>
                            </td>
                            <td>
                                <input id="<%=item.code%>" type="button" value="Remove"
                                    onclick='remove("<%=course.code%>","<%=item.email%>")'>
                            </td>

                        </tr>
                        <% }) %>
                </tbody>
            </table>

            <% } %>
    </div>
    <!-- create assignment -->
    <div style="margin-left: 50px;">
        <h3>Create new assignment</h3>
        <input type="button" value="create-assignment" name="create-assignment" id="new-assignment"><br>
        <div id="newassign" style="display: none; margin-left: 200px;">
            <br>
            <form method="post" action="/addAssign" enctype="multipart/form-data">
                <label>Assignment Created By :&emsp;</label>
                <input type="text" name="createdBy" value="<%=course.instructor%>"
                    placeholder="<%=course.instructor%>"><br>
                <label>Course Name :&emsp;</label>
                <input type="text" name="forCourse" value="<%=course.code%>" placeholder="<%=course.code%>"><br>
                <label>Title for assignment :&emsp;</label>
                <input type="text" name="assignTitle" placeholder="Assignment Name"><br>
                <label>Description :&emsp;</label>
                <input type="text" name="description" style="height: 70px;"><br>
                <label>Due Date :&emsp;</label>
                <input type="date" name="deadline"><br>

                <label>Upload Assignment :&emsp;</label>
                <input type="file" name="uploadFile" id="uploadFile" required><br>
                <input type="submit" value="Submit" id="closeAssign" />
            </form>
        </div>
    </div>

    <!-- show uploaded assignments -->
    <div style="margin-left: 50px; margin-right: 50px;">
        <h3>Your Uploaded Assignments</h3>
        <table id="uploadedAssign" class="table table-striped table-bordered">
            <thead>
                <tr>
                    <th>Title</th>
                    <th>Description</th>
                    <th>Due Date</th>
                    <th>File</th>
                </tr>
            </thead>
            <tbody>
                <% course.assignment.forEach(function(item){ %>
                    <tr>
                        <td>
                            <%= item.title%>
                        </td>
                        <td>
                            <%= item.description%>
                        </td>
                        <td>
                            <%= item.deadline%>
                        </td>
                        <td>
                            <a href="uploads/<%= item.file%>" target="_blank">question paper</a>
                        </td>
                    </tr>
                    <% }) %>
            </tbody>
        </table>
    </div>
    <div>
        <h1><a href="viewsubmission?code=<%=course.code%>">View Submissions</a><br></h1>
    </div>
    <!-- submissions -->
    <!-- <div style="margin-left: 50px;">
        <h3>View Submissions</h3>
        <table id="submissions" class="table table-striped table-bordered">
        <thead>
            <tr>
                <th>title</th>
                <th>Student Name</th>
                <th>Submission File</th>
                <th>Assign Grade</th>
            </tr>
        </thead>
        <tbody>
            <% course.assignment.forEach(function(item){ %>
            <tr>
                <td>
                    <%=item.title%>
                </td>
                <td>
                    <%=item.submission%>
                </td>
                <td>
                    <%= item.submission%>
                </td>
                <td>
                    <select></select>
                </td>
            </tr>
            <% }) %>
        </tbody>
        </table>
    </div> -->
</body>
<script>
    $(document).ready(function () {
        $('#offlinestudents').DataTable();
    });
    function remove(code, email) {
        $.get(
            "remove",
            {
                code: code,
                email: email
            },
            function (data) {
                alert(data);
                location.reload();
            }
        );
    }
    $('#new-assignment').click(function () {
        $('#newassign').toggle();
    });

</script>