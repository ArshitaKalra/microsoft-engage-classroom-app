<!doctype html>
<html lang="en">
<title>MSEP</title>

<link href="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css" rel="stylesheet">
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<link rel="stylesheet" href="http://cdn.datatables.net/1.10.2/css/jquery.dataTables.min.css">
<script type="text/javascript" src="http://cdn.datatables.net/1.10.2/js/jquery.dataTables.min.js"></script>
<script type="text/javascript" src="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
<body>
<div>
    <h1>Course Page</h1>
</div>
<hr>
<div>
    <h2>Course </h2>
<% if(course!=null) {  %>
    <div> This is a single course page
    <h1> Course : <%=course.name%></h1>
    <h2>Course Code : <%=course.code%></h2>
    <h2>Cap for course is: <%=course.cap%></h2>
    <!-- <h2>Offline Seats Available: <%=course.offlineSeats%> </h2> -->
    <form method="get" action="/updateseat" >
        <label>Available Offline Seats for</label>
        <input name="course" type="text" value="<%=course.code%>" placeholder="<%=course.code%>"> 
        <input name="offlineSeats" type="number" value="<%=course.offlineSeats%>" placeholder="<%=course.cap%>"> 
        <!-- <button class="btn btn-success" type="submit">Enter Value</button> -->
        <!-- <button type="reset">Reset</button> -->
        <input type="submit" value="submit"/>
    </form>
    <h2>Meetlink: <%=course.meetlink%></h2>
    <% } %> </div>
</div>
<div>
    Number of students for Next offline class : <%=course.bookedSeats%>
</div>
Students attending offline classes are :
<% if(course.offlineStud!=null) { %>
    <!-- <%=course.offlineStud.length%> -->
    <table id="offlinestudents" class="table table-striped table-bordered">
        <thead>
        <tr>
            <th>Name</th>
            <th>Email-ID</th>
            <th>Remove From Offline</th>
            
        </tr>
    </thead>
    <tbody>
        <% course.offlineStud.forEach(function(item){ %>
            <tr>
                <td>
                    <%= item.name%>
                </td>
                <td>
                    <%= item.email%>
                </td>
                <td>
                    <input id="<%=item.code%>" type="button" value="Remove"  onclick='remove("<%=course.code%>","<%=item.email%>")'>
                </td>

            </tr>
            <% }) %>
        </tbody>
    </table>

    <% } %> 
</body>
<script>
    $(document).ready(function () {
        $('#offlinestudents').DataTable();
    });
    function remove(code,email){
$.get(
    "remove",
    {
        code : code,
        email:email
    },
    function(data) {
       alert(data);
       location.reload();
    }
);
}

</script>